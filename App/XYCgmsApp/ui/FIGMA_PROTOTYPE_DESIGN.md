# XYCgmsApp Figma原型设计文档

## 1. 设计概述

本文档基于XYCgmsApp的需求文档（1_ALIGNMENT.md、2_CONSENSUS.md）和系统架构设计文档（3_DESIGN.md），详细定义应用的UI/UX设计，包括各平台（iOS、iPadOS、macOS、watchOS）的界面布局、交互流程和设计规范，为Figma原型设计提供详细指导。

**Figma文件信息**：
- 文件链接：https://www.figma.com/design/TFRJu8U4sWZRmKG7ghWQk1/XYCgmsApp?m=auto&t=xLDfAh0FBE98Wogq-6
- File Key：TFRJu8U4sWZRmKG7ghWQk1

**当前状态**：Figma文档已创建，需要按照本设计指南进行具体页面设计实现。

## 2. 设计原则

- **一致性**：各平台保持功能和设计语言的一致性
- **直观性**：界面简洁明了，数据展示直观易懂
- **可访问性**：支持无障碍功能，确保所有用户都能正常使用
- **平台适应性**：针对不同平台特性进行优化
- **医疗专业性**：设计需体现医疗应用的专业性和可靠性

## 3. 平台设计规范

### 3.1 iOS设计规范

- **遵循iOS人机界面指南**：使用系统字体SF Pro，标准间距和布局
- **深色/浅色模式**：支持系统深色模式切换
- **动态类型**：响应系统字体大小调整
- **安全区域适配**：适配iPhone刘海屏和底部安全区域
- **手势操作**：支持标准iOS手势（滑动、点击、长按等）

### 3.2 iPadOS设计规范

- **大屏布局优化**：利用更大屏幕空间，多列布局
- **分屏支持**：适配iPad分屏多任务模式
- **侧边栏导航**：主屏幕使用侧边栏导航
- **浮动窗口**：部分功能可使用浮动窗口展示

### 3.3 macOS设计规范

- **遵循macOS人机界面指南**：使用SF Pro字体，标准macOS控件
- **菜单栏集成**：支持在菜单栏显示关键信息
- **键盘快捷键**：支持标准键盘导航和快捷键
- **窗口模式**：支持窗口最大化、最小化等操作
- **触摸板手势**：支持macOS触摸板手势操作

### 3.4 watchOS设计规范

- **极简设计**：信息精简，重点突出
- **快速访问**：常用功能一键触达
- **并发症支持**：支持在表盘显示关键数据
- **通知优化**：预警通知清晰明确

## 4. 应用色彩系统

### 4.1 主色调

- **主色**：#007AFF（iOS标准蓝色）- 代表专业、信任
- **血糖正常色**：#34C759（绿色）- 表示血糖在正常范围
- **血糖偏低色**：#FF9500（橙色）- 表示血糖偏低
- **血糖偏高色**：#FF3B30（红色）- 表示血糖偏高

### 4.2 辅助色

- **背景色**：iOS系统默认背景色
- **文本色**：iOS系统默认文本色
- **边框色**：iOS系统默认边框色
- **强调色**：#5856D6（紫色）- 用于特殊操作和高亮

## 5. 核心页面设计

### 5.1 主屏幕仪表盘

**功能**：展示血糖数据概览，包括当前血糖值、趋势、设备连接状态等

**iOS/iPadOS布局**：
- 顶部：当前血糖值（大号字体），血糖状态（正常/偏高/偏低）
- 中部：血糖趋势小图表（过去24小时）
- 底部：快捷操作区（连接设备、查看详情、设置等）
- 设备状态指示器：显示CGMS设备连接状态

**macOS布局**：
- 左侧：侧边栏导航
- 右侧：主内容区（当前血糖值、趋势图、统计数据）
- 底部状态栏：设备连接状态

**watchOS布局**：
- 顶部：当前血糖值（大号字体）
- 中部：简易血糖趋势图
- 底部：设备连接状态

### 5.2 血糖曲线图表页面

**功能**：详细展示血糖变化趋势，支持多时间维度查看

**iOS/iPadOS布局**：
- 顶部：时间范围选择器（日/周/月/年）
- 中部：主要图表区域（血糖曲线图）
- 交互：支持滑动查看不同时间范围、缩放查看细节、点击数据点查看具体数值
- 底部：统计数据区域（平均、最高、最低值等）

**macOS布局**：
- 左侧：时间范围选择和筛选器
- 右侧：大型图表区域，支持更详细的数据展示
- 底部：详细统计信息面板

**watchOS布局**：
- 简化版血糖曲线，仅显示最近几小时数据
- 支持左右滑动切换日期

### 5.3 数据历史与统计页面

**功能**：展示历史血糖数据和详细统计分析

**iOS/iPadOS布局**：
- 顶部：筛选条件（日期范围、时间段等）
- 中部：数据列表（表格形式，按时间排序）
- 底部：导出按钮（支持CSV格式导出）

**macOS布局**：
- 左侧：高级筛选面板
- 右侧：数据表格（支持排序、搜索）
- 工具栏：导出、打印等操作

### 5.4 设备连接与管理页面

**功能**：管理CGMS设备连接、查看设备信息

**iOS/iPadOS布局**：
- 顶部：当前连接设备信息
- 中部：可用设备列表（扫描结果）
- 操作按钮：连接/断开设备、刷新设备列表
- 设备信息：设备型号、固件版本、电池电量等

**macOS布局**：
- 左侧：设备状态
- 右侧：设备列表和连接控制
- 底部：详细设备信息面板

**watchOS布局**：
- 简化的设备连接状态显示
- 连接/断开设备的快捷操作

### 5.5 设置页面

**功能**：管理应用配置，包括预警阈值、通知设置等

**iOS/iPadOS布局**：
- 分组列表：预警设置、账户设置、数据管理、关于等
- 预警阈值设置：滑块控制高/低血糖预警阈值
- 通知设置：开关各种通知类型
- 隐私设置：数据共享、权限管理

**macOS布局**：
- 标签式布局：各项设置分类管理
- 预警阈值设置：数值输入或滑块控制
- 详细的权限和隐私设置面板

**watchOS布局**：
- 核心设置项的快速访问
- 基本预警阈值调整

### 5.6 多用户预警配置页面

**功能**：配置哪些用户接收预警通知

**iOS/iPadOS布局**：
- 联系人列表：可添加、编辑、删除接收预警的联系人
- 预警类型选择：为每个联系人设置接收的预警类型
- 通知方式设置：短信、应用通知等

**macOS布局**：
- 联系人管理表格
- 预警配置侧边栏

### 5.7 数据导出页面

**功能**：导出历史血糖数据

**iOS/iPadOS布局**：
- 导出格式选择（CSV）
- 日期范围选择器
- 导出选项（包含哪些数据字段）
- 导出按钮

**macOS布局**：
- 更详细的导出选项面板
- 导出进度显示
- 导出文件保存位置选择

## 6. 核心组件设计

### 6.1 血糖趋势图表组件

**功能**：显示血糖变化趋势线

**设计要点**：
- 使用平滑曲线连接数据点
- 支持背景网格线便于读数
- 支持标记正常范围区域
- 异常值用不同颜色标记
- 触摸交互支持查看具体数据

### 6.2 血糖状态指示器

**功能**：直观显示当前血糖状态

**设计要点**：
- 根据血糖值自动切换颜色（正常/偏低/偏高）
- 支持大字体显示当前值
- 显示相对于前一次测量的变化趋势箭头

### 6.3 预警通知组件

**功能**：显示血糖异常预警

**设计要点**：
- 醒目的颜色和图标
- 清晰的预警类型和血糖值
- 包含时间戳
- 支持快速操作按钮（确认、查看详情等）

### 6.4 设备连接状态组件

**功能**：显示CGMS设备连接状态

**设计要点**：
- 使用状态图标（已连接/连接中/断开连接）
- 显示信号强度
- 显示设备电量
- 支持快速连接/断开操作

### 6.5 阈值设置组件

**功能**：设置血糖预警阈值

**设计要点**：
- 双滑块控件（低血糖和高血糖阈值）
- 实时预览阈值设置结果
- 显示默认推荐值
- 提供重置选项

## 7. 交互流程设计

### 7.1 首次使用引导流程

1. 应用启动 -> 欢迎页面
2. 权限请求（蓝牙、通知、健康数据）
3. 设备连接向导
4. 预警阈值设置向导
5. 完成设置，进入主界面

### 7.2 设备连接流程

1. 进入设备管理页面
2. 点击"扫描设备"按钮
3. 选择要连接的CGMS设备
4. 等待连接完成并验证
5. 显示连接成功提示

### 7.3 预警触发流程

1. 接收血糖数据
2. 系统判断是否超出阈值
3. 触发预警通知
4. 显示预警弹窗/推送通知
5. 用户确认预警
6. 记录预警历史

### 7.4 数据同步流程

1. 进入设置或数据管理页面
2. 点击"同步数据"按钮
3. 显示同步进度
4. 同步完成显示结果
5. 处理可能的同步冲突

## 8. 响应式设计策略

### 8.1 iOS/iPadOS响应式适配

- **设备旋转适配**：横屏模式下重新排列UI元素，优化显示
- **iPad大屏适配**：利用多列布局，增加侧边栏导航
- **分屏模式**：在iPad分屏时调整内容布局

### 8.2 多尺寸适配

- **小屏手机**：简化布局，优先显示核心功能
- **大屏手机/平板**：扩展布局，显示更多相关信息
- **Mac桌面**：充分利用屏幕空间，提供更完整的功能
- **Apple Watch**：极简设计，仅保留最关键的信息

## 9. 无障碍设计

### 9.1 VoiceOver支持

- 为所有UI元素提供适当的辅助标签
- 确保界面元素顺序合理
- 支持动态类型，确保文本清晰可读

### 9.2 色彩无障碍

- 确保颜色对比度符合WCAG标准
- 不仅依靠颜色传达信息，辅助使用图标和文本
- 支持反转颜色模式

## 10. 原型实现优先级

### 10.1 第一阶段（核心功能）

1. 主屏幕仪表盘设计
2. 血糖曲线图表页面设计
3. 设备连接与管理页面设计
4. 预警通知组件设计

### 10.2 第二阶段（增强功能）

1. 设置页面设计
2. 数据历史与统计页面设计
3. 多用户预警配置页面设计
4. 数据导出页面设计

### 10.3 第三阶段（平台适配）

1. iPadOS适配优化
2. macOS适配优化
3. watchOS适配优化

## 11. 设计资源清单

### 11.1 必需资源

- 血糖相关图标（正常、偏高、偏低状态）
- 设备连接状态图标
- 导航图标集
- 按钮和控件样式
- 颜色调色板
- 字体样式规范

### 11.2 参考资料

- iOS人机界面指南：https://developer.apple.com/design/human-interface-guidelines/ios/overview/themes/
- iPadOS人机界面指南：https://developer.apple.com/design/human-interface-guidelines/ipados/overview/themes/
- macOS人机界面指南：https://developer.apple.com/design/human-interface-guidelines/macos/overview/themes/
- watchOS人机界面指南：https://developer.apple.com/design/human-interface-guidelines/watchos/overview/themes/

## 12. Figma实现说明

### 12.1 Figma页面结构

1. **首页/索引页**：
   - 设计系统概述
   - 页面导航
   - 设计规范链接

2. **设计系统页面**：
   - 颜色系统（使用Figma变量）
   - 字体样式（建立文本样式库）
   - 组件库（创建主组件）
   - 图标库

3. **平台设计页面**：
   - iOS页面集合
   - iPadOS页面集合
   - macOS页面集合
   - watchOS页面集合

### 12.2 Figma实现步骤

1. **创建设计系统**：
   - 建立颜色变量（Primary, Secondary, States, Backgrounds等）
   - 定义文本样式（Heading, Subheading, Body, Caption等）
   - 创建核心组件（按钮、输入框、卡片、开关等）
   - 上传和组织图标资源

2. **构建页面模板**：
   - 为每个平台创建标准页面模板
   - 定义布局网格和间距规范
   - 设置响应式断点

3. **实现核心页面**：
   - 按照优先级实现第一阶段页面：
     - 主屏幕仪表盘
     - 血糖曲线图表页面
     - 设备连接与管理页面
     - 预警通知组件

4. **创建交互原型**：
   - 添加页面间导航交互
   - 设置微交互和状态变化
   - 实现预警触发流程

5. **添加设计标注**：
   - 为所有组件添加尺寸标注
   - 设置开发模式信息
   - 导出设计资源

### 12.3 Figma最佳实践

- 使用Figma组件系统和变体功能确保设计一致性
- 利用自动布局提高设计效率和响应式能力
- 使用Figma变量管理主题和颜色系统
- 建立清晰的页面和组件命名规范
- 为交互和动画效果添加注释
- 与开发团队协作，确保设计可实现性

### 12.4 技术规格

- Figma文件版本：使用最新版Figma功能
- 导出格式：PNG, SVG (用于图标和插图)
- 设计分辨率：
  - iOS：375×667 (iPhone SE) 和 414×896 (iPhone 11)
  - iPadOS：768×1024 (iPad) 和 834×1194 (iPad Air)
  - macOS：1440×900 (基础设计)
  - watchOS：38×38mm和44×44mm (Apple Watch)

## 13. 优先实现指南

### 13.1 立即实现项

1. **iOS仪表盘设计**：
   - 创建血糖状态展示组件
   - 设计24小时趋势图
   - 实现设备连接状态指示器

2. **核心组件库**：
   - 血糖状态指示器
   - 预警通知组件
   - 时间范围选择器
   - 设备连接状态组件

### 13.2 实现注意事项

- 遵循Apple平台设计指南，确保原生体验
- 血糖数据可视化应直观且医疗准确性优先
- 预警设计应醒目但不引起不必要的恐慌
- 确保所有设计元素符合医疗应用的专业形象
- 为所有交互元素添加适当的悬停和点击状态

---

本设计文档将作为Figma原型设计的基础，确保XYCgmsApp的UI/UX设计符合需求并提供良好的用户体验。随着项目的推进，设计文档可能需要根据实际情况进行调整和优化。

请设计师团队按照本指南在Figma文件中进行具体实现，并在完成后通知开发团队进行评审。